# ì†Œë‹´(SODAM) ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹¤íŒ¨ ë¡œê·¸ ë¶„ì„ ë° í•´ê²°ë°©ì•ˆ ë³´ê³ ì„œ

## ğŸ“‹ ê°œìš”

- **ì‘ì„±ì¼**: 2025-01-10
- **ì‘ì„±ì**: ì‹œìŠ¤í…œ ë¶„ì„ê°€
- **ë¬¸ì„œ ìœ í˜•**: ë¶„ì„ ë³´ê³ ì„œ
- **ê´€ë ¨ ì´ìŠˆ**: Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹¤íŒ¨

## ğŸ¯ ëª©ì 

Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹¤íŒ¨ ë¡œê·¸ë¥¼ ë¶„ì„í•˜ì—¬ ì •í™•í•œ ì›ì¸ì„ íŒŒì•…í•˜ê³ , êµ¬ì²´ì ì¸ í•´ê²°ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.

## ğŸ“Š í”„ë¡œì íŠ¸ íŒŒì•… ê²°ê³¼ (3íšŒ ì‹¤ì‹œ)

### 1ì°¨ íŒŒì•…: ì „ì²´ êµ¬ì¡° ë° ì„¤ì • íŒŒì¼ ë¶„ì„

- **ëŒ€ìƒ íŒŒì¼**: `src/main/resources/application.yml`
- **ì£¼ìš” ë°œê²¬ì‚¬í•­**:
    - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì´ `spring.datasource.hikari.*` í˜•íƒœë¡œ êµ¬ì„±ë¨
    - `jdbc-url` ì‚¬ìš© (í‘œì¤€ `url` ëŒ€ì‹ )
    - í™˜ê²½ë³€ìˆ˜ë“¤ì´ `#{null}` ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ë¨

### 2ì°¨ íŒŒì•…: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë° ê´€ë ¨ í´ë˜ìŠ¤ ë¶„ì„

- **ëŒ€ìƒ íŒŒì¼**: `src/main/java/com/rich/sodam/config/DatabaseConfig.java`
- **ì£¼ìš” ë°œê²¬ì‚¬í•­**:
    - `@Value("${spring.datasource.url}")` í˜•íƒœë¡œ í”Œë ˆì´ìŠ¤í™€ë” ì°¸ì¡°
    - application.ymlì˜ ì„¤ì • ê²½ë¡œì™€ ë¶ˆì¼ì¹˜ ë°œê²¬
    - HikariCP ìˆ˜ë™ ì„¤ì •ìœ¼ë¡œ ì¸í•œ ì„¤ì • ì¤‘ë³µ

### 3ì°¨ íŒŒì•…: Redis ì„¤ì • ë° ë¦¬í¬ì§€í† ë¦¬ êµ¬ì¡° ë¶„ì„

- **ëŒ€ìƒ íŒŒì¼**: `src/main/java/com/rich/sodam/config/RedisConfig.java`
- **ì£¼ìš” ë°œê²¬ì‚¬í•­**:
    - JWTìš©ê³¼ ìºì‹œìš© Redis ì—°ê²° ë¶„ë¦¬ ì„¤ì •
    - Spring Data Redis ë¦¬í¬ì§€í† ë¦¬ ìŠ¤ìº” ê²½ê³  ë°œìƒ
    - CustomCacheErrorHandler ì •ìƒ ë“±ë¡ í™•ì¸

## ğŸ” ë¡œê·¸ ë¶„ì„ ê²°ê³¼

### í•µì‹¬ ì˜¤ë¥˜ (ë¼ì¸ 147)

```
Caused by: org.springframework.util.PlaceholderResolutionException: 
Could not resolve placeholder 'spring.datasource.url' in value "${spring.datasource.url}"
```

### ì˜¤ë¥˜ ë°œìƒ ê²½ë¡œ ì¶”ì 

1. **ìµœìƒìœ„ ì˜¤ë¥˜** (ë¼ì¸ 49): `observationRegistryPostProcessor` ë¹ˆ ìƒì„± ì‹¤íŒ¨
2. **ì¤‘ê°„ ì˜¤ë¥˜** (ë¼ì¸ 70): `transactionAspect` ë¹ˆ ìƒì„± ì‹¤íŒ¨
3. **ê·¼ë³¸ ì›ì¸** (ë¼ì¸ 124): `databaseConfig` ë¹ˆ ì˜ì¡´ì„± ì£¼ì… ì‹¤íŒ¨
4. **ì§ì ‘ ì›ì¸** (ë¼ì¸ 147): í”Œë ˆì´ìŠ¤í™€ë” í•´ê²° ì‹¤íŒ¨

### ë¶€ìˆ˜ì  ë¬¸ì œì 

- **Redis ë¦¬í¬ì§€í† ë¦¬ ê²½ê³ ** (ë¼ì¸ 21-37): JPA ë¦¬í¬ì§€í† ë¦¬ë“¤ì´ Redis ë¦¬í¬ì§€í† ë¦¬ë¡œ ì˜¤ì¸ë¨
- **BeanPostProcessor ê²½ê³ ** (ë¼ì¸ 39-41): ë¹ˆ í›„ì²˜ë¦¬ê¸° ìˆœì„œ ë¬¸ì œ

## ğŸ¯ ì›ì¸ ë¶„ì„

### ì£¼ìš” ì›ì¸: ì„¤ì • ê²½ë¡œ ë¶ˆì¼ì¹˜

| êµ¬ì„± ìš”ì†Œ    | application.yml                              | DatabaseConfig.java                   | ìƒíƒœ    |
|----------|----------------------------------------------|---------------------------------------|-------|
| URL      | `spring.datasource.hikari.jdbc-url`          | `spring.datasource.url`               | âŒ ë¶ˆì¼ì¹˜ |
| Username | `spring.datasource.hikari.username`          | `spring.datasource.username`          | âŒ ë¶ˆì¼ì¹˜ |
| Password | `spring.datasource.hikari.password`          | `spring.datasource.password`          | âŒ ë¶ˆì¼ì¹˜ |
| Driver   | `spring.datasource.hikari.driver-class-name` | `spring.datasource.driver-class-name` | âŒ ë¶ˆì¼ì¹˜ |

### ë¶€ìˆ˜ì  ì›ì¸

1. **Spring Data ëª¨ë“ˆ ì¶©ëŒ**: JPAì™€ Redis ë¦¬í¬ì§€í† ë¦¬ ìŠ¤ìº” ì¶©ëŒ
2. **ë¹ˆ ìƒì„± ìˆœì„œ**: ìºì‹œ ê´€ë ¨ ë¹ˆë“¤ì˜ ìƒì„± ìˆœì„œ ë¬¸ì œ
3. **í”„ë¡œíŒŒì¼ ì„¤ì •**: `@Profile("!test")` ì„¤ì •ìœ¼ë¡œ ì¸í•œ í…ŒìŠ¤íŠ¸ í™˜ê²½ ë¶„ë¦¬

## ğŸ’¡ í•´ê²°ë°©ì•ˆ

### ë°©ì•ˆ 1: DatabaseConfig ìˆ˜ì • (ê¶Œì¥)

**ì¥ì **: ê¸°ì¡´ application.yml êµ¬ì¡° ìœ ì§€, ìµœì†Œí•œì˜ ë³€ê²½
**ë‹¨ì **: ìˆ˜ë™ HikariCP ì„¤ì • ìœ ì§€

```java
// DatabaseConfig.java ìˆ˜ì • í•„ìš” ë¶€ë¶„
@Value("${spring.datasource.hikari.jdbc-url}")
private String jdbcUrl;

@Value("${spring.datasource.hikari.username}")
private String username;

@Value("${spring.datasource.hikari.password}")
private String password;

@Value("${spring.datasource.hikari.driver-class-name}")
private String driverClassName;
```

### ë°©ì•ˆ 2: application.yml ìˆ˜ì •

**ì¥ì **: Spring Boot í‘œì¤€ ì„¤ì • ì¤€ìˆ˜
**ë‹¨ì **: ê¸°ì¡´ ì„¤ì • êµ¬ì¡° ë³€ê²½ í•„ìš”

```yaml
spring:
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/sodam?serverTimezone=Asia/Seoul}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:#{null}}
    driver-class-name: ${DB_DRIVER_CLASS_NAME:com.mysql.cj.jdbc.Driver}
    hikari:
      # ê¸°ì¡´ hikari ì„¤ì •ë“¤...
```

### ë°©ì•ˆ 3: DatabaseConfig ì œê±° (ìµœì )

**ì¥ì **: Spring Boot ìë™ ì„¤ì • í™œìš©, ì½”ë“œ ê°„ì†Œí™”
**ë‹¨ì **: ê¸°ì¡´ ì»¤ìŠ¤í…€ ì„¤ì • ì†ì‹¤

## ğŸ”§ ìˆ˜ì • ë° ë¹Œë“œ ëª…ë ¹ì–´

### âš ï¸ ìŠ¹ì¸ ìš”ì²­

ë‹¤ìŒ ìˆ˜ì • ë° ë¹Œë“œ ê´€ë ¨ í„°ë¯¸ë„ ëª…ë ¹ì–´ë“¤ì˜ ì‹¤í–‰ì— ëŒ€í•œ ìŠ¹ì¸ì„ ìš”ì²­í•©ë‹ˆë‹¤:

#### 1. ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì •

```bash
# DatabaseConfig.java íŒŒì¼ ìˆ˜ì •
# - @Value ì–´ë…¸í…Œì´ì…˜ì˜ í”Œë ˆì´ìŠ¤í™€ë” ê²½ë¡œ ìˆ˜ì •
# - spring.datasource.* â†’ spring.datasource.hikari.*
```

#### 2. ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸

```bash
# í”„ë¡œì íŠ¸ ë¹Œë“œ
./gradlew clean build

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ í…ŒìŠ¤íŠ¸
./gradlew bootRun

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test
```

#### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì • í™•ì¸

```bash
# .env íŒŒì¼ ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ í™•ì¸
# DB_URL, DB_USERNAME, DB_PASSWORD ë“±ì˜ ê°’ ì„¤ì • í™•ì¸
```

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

### ì¦‰ì‹œ íš¨ê³¼

- âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì„±ê³µ
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ìƒí™”
- âœ… Spring Context ì´ˆê¸°í™” ì™„ë£Œ

### ì¥ê¸°ì  íš¨ê³¼

- ğŸ”§ ì‹œìŠ¤í…œ ì•ˆì •ì„± í–¥ìƒ
- ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹… ìš©ì´ì„± ì¦ëŒ€
- ğŸš€ ê°œë°œ ìƒì‚°ì„± í–¥ìƒ

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [ê°œë°œ ê°€ì´ë“œë¼ì¸](../guidelines/development_guidelines.md)
- [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ê°€ì´ë“œ](../technical/ë°ì´í„°ë² ì´ìŠ¤_ì„¤ì •_ê°€ì´ë“œ.md)
- [Redis ìºì‹œ ì „ëµ ë¬¸ì„œ](../technical/Redis_ìºì‹œ_ì „ëµ_ë¬¸ì„œ.md)

## ğŸ“… ë³€ê²½ ì´ë ¥

| ë‚ ì§œ         | ë²„ì „  | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì     |
|------------|-----|-------|---------|
| 2025-01-10 | 1.0 | ì´ˆê¸° ì‘ì„± | ì‹œìŠ¤í…œ ë¶„ì„ê°€ |

---

**ìŠ¹ì¸ ëŒ€ê¸° ì¤‘**: ìœ„ì— ëª…ì‹œëœ ìˆ˜ì • ë° ë¹Œë“œ ê´€ë ¨ í„°ë¯¸ë„ ëª…ë ¹ì–´ë“¤ì˜ ì‹¤í–‰ ìŠ¹ì¸ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.
